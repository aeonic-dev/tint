function setStyle(t,e,n){for(hgrad="",i=0;i<360;i+=1)hgrad+=`, hsl(${i},${e}%,${n}%)`;styles=`#tint-hue::-webkit-slider-runnable-track {\n  background: linear-gradient(90deg${hgrad});\n}\n#tint-hue::-moz-range-track {\n  background: linear-gradient(90deg${hgrad});\n}\n#tint-sat::-webkit-slider-runnable-track {\n  background: linear-gradient(90deg, hsl(${t},0%,${n}%), hsl(${t},100%,${n}%));\n}\n#tint-sat::-moz-range-track {\n  background: linear-gradient(90deg, hsl(${t},0%,${n}%), hsl(${t},100%,${n}%));\n}\n#tint-light::-webkit-slider-runnable-track {\n  background: linear-gradient(90deg, hsl(${t},${e}%,0%), hsl(${t},${e}%,50%), hsl(${t},${e}%,100%));\n}\n#tint-light::-moz-range-track {\n  background: linear-gradient(90deg, hsl(${t},${e}%,0%), hsl(${t},${e}%,50%), hsl(${t},${e}%,100%));\n}`,q.get("#tint-styles").html(styles)}document.body.innerHTML+='<div class="tint-modal">\n  <div class="tint-picker">\n    <style id="tint-styles"></style>\n    <input id="tint-hue" type="range" min="0" max="360" value="0">\n    <input id="tint-sat" type="range" min="0" max="100" value="100">\n    <input id="tint-light" type="range" min="0" max="100" value="50">\n  </div>\n    <button id="tint-done">Select</button>\n</div>',q.forAll(".tint-picker>input[type=range]",t=>{t.on("input",t=>{setStyle(q.get("#tint-hue").value,q.get("#tint-sat").value,q.get("#tint-light").value)})});let moving=!1,mx=0,my=0;q.get(".tint-modal").style.top="0px",q.get(".tint-modal").style.left="0px",q.get(".tint-modal").on("mousedown",t=>{moving=!0,mx=-parseInt(t.target.style.left.substr(0,t.target.style.left.length-2))+t.clientX,my=-parseInt(t.target.style.top.substr(0,t.target.style.top.length-2))+t.clientY}),q.get(".tint-modal>.tint-picker").on("mousedown",t=>{t.stopPropagation()}),window.addEventListener("mouseup",t=>{moving=!1}),window.addEventListener("mousemove",t=>{moving&&(q.get(".tint-modal").style.left=t.clientX-mx+"px",q.get(".tint-modal").style.top=t.clientY-my+"px")}),q.get("#tint-done").on("click",t=>{t=new Event("tintdone"),window.dispatchEvent(t)});class tint{static open(t="hsl(0,100%,50%)"){let e=[0,100,50];try{e=t.substr(4,t.length-1).split(",").map(t=>parseInt(t.replace("%","")))}catch(t){e=[0,100,50]}finally{q.get("#tint-hue").value=e[0],q.get("#tint-sat").value=e[1],q.get("#tint-light").value=e[2],q.get(".tint-modal").style.display="block",setStyle(e[0],e[1],e[2])}}static close(){q.get(".tint-modal").style.display="none"}static get(){return"hsl("+q.get("#tint-hue").value+","+q.get("#tint-sat").value+"%,"+q.get("#tint-light").value+"%)"}}tint.open("hsl(180,80%,50%)"),window.addEventListener("tintdone",t=>{tint.close(),alert(tint.get())});
